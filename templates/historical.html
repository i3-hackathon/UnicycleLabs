<!doctype html>
<html>
<head>
  <title>Drive Now - Historical Availability</title>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="//maps.googleapis.com/maps/api/js?libraries=places"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.27/angular.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.0/ui-bootstrap-tpls.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700|Roboto:300,400,700' rel='stylesheet' type='text/css'>
  <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1, user-scalable=no"/>  
  <link rel="shortcut icon" href="/static/img/favicon.png"/>

  <style>
    html, body {
      width: 100%;
      height: 100%;
    }
    .map-container {
      width: 100%;
      height: 100%;
    }
    .map {
      width: 100%;
      height: 100%;
    }
    .info-section {
      position: fixed;
      left: 80px;
      top: 20px;
      padding: 10px;
      background-color: rgba(255, 255, 255, 0.7);
      border-radius: 2px;
      font-size: 14pt;
    }
  </style>

  <script>
    function init(pickupLatLngs) {
      console.log(pickupLatLngs);
      var map = new google.maps.Map($('#map')[0], {
        center: new google.maps.LatLng(0, 0),
        zoom: 3
      });

      var bounds = new google.maps.LatLngBounds();

      $.each(pickupLatLngs, function(i, latLngJson) {
        var latlng = new google.maps.LatLng(latLngJson['lat'], latLngJson['lng']);
        var marker = new google.maps.Marker({
          map: map,
          position: latlng
        });
        bounds.extend(latlng);
      });

      map.fitBounds(bounds);
    }

    $(function() {
      init({{pickup_latlngs | safe}});
    });
  </script>

</head>
<body>
  <div class="map-container">
    <div class="map" id="map">
    </div>
  </div>
  <div class="info-section">
    Car pickups in Munich, {{date_str}} between 1pm and 2pm
  </div>
</body>
</html>
